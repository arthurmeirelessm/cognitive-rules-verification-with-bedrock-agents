2025-04-17 00:43:12,614 - INFO - Found credentials in environment variables.
2025-04-17 00:43:12,761 - INFO - <Server sockets=(<asyncio.TransportSocket fd=7, family=2, type=1, proto=0, laddr=('0.0.0.0', 5000)>,)> is serving
2025-04-17 00:43:12,762 - INFO - Running on http://0.0.0.0:5000 (CTRL + C to quit)
2025-04-17 00:43:19,391 - INFO - [ASYNC] Iniciando: agent_orchestrator_controller | Args: (<src.controllers.cognitive_rulesVerification_app_controller.CognitiveRulesVerificationAppController object at 0x7f3490101700>,) | Kwargs: {}
2025-04-17 00:43:19,391 - INFO - [ASYNC] Iniciando: agent_orchestrator_service | Args: (<src.services.cognitive_rulesVerification_app_service.CognitiveRulesVerificationAppServices object at 0x7f3490101790>, 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE3NDQ4NjQyNTd9.U0Tk_j5nNt-T5dcVu78UaKsI8CMZsFdIWXiK72Q44Gc', 'quem foi neymar') | Kwargs: {}
2025-04-17 00:43:19,391 - INFO - [ASYNC] Iniciando: verify_jwt | Args: (<src.auth.JWTAuth object at 0x7f34901017c0>, 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE3NDQ4NjQyNTd9.U0Tk_j5nNt-T5dcVu78UaKsI8CMZsFdIWXiK72Q44Gc') | Kwargs: {}
2025-04-17 00:43:19,391 - INFO - [ASYNC] Finalizado: verify_jwt -> Retorno: True
2025-04-17 00:43:19,391 - INFO - [ASYNC] Iniciando: bedrock_with_langchain_client | Args: (<src.clients.bedrock_client.BedrockLangchainClient object at 0x7f34901021e0>, 'quem foi neymar') | Kwargs: {}
2025-04-17 00:43:19,393 - INFO - Using Bedrock Invoke API to generate response
2025-04-17 00:43:20,141 - ERROR - Error raised by bedrock service
Traceback (most recent call last):
  File "/home/arthurmeirelessm/flask-fargate-app/venv/lib/python3.12/site-packages/langchain_aws/llms/bedrock.py", line 935, in _prepare_input_and_invoke
    response = self.client.invoke_model(**request_options)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arthurmeirelessm/flask-fargate-app/venv/lib/python3.12/site-packages/botocore/client.py", line 570, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/arthurmeirelessm/flask-fargate-app/venv/lib/python3.12/site-packages/botocore/context.py", line 124, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/arthurmeirelessm/flask-fargate-app/venv/lib/python3.12/site-packages/botocore/client.py", line 1031, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.errorfactory.ValidationException: An error occurred (ValidationException) when calling the InvokeModel operation: Invocation of model ID anthropic.claude-3-5-haiku-20241022-v1:0 with on-demand throughput isnâ€™t supported. Retry your request with the ID or ARN of an inference profile that contains this model.
2025-04-17 00:43:20,145 - ERROR - [ASYNC] Erro em bedrock_with_langchain_client: Coroutine factory method[1m[35m src.clients.bedrock_client.BedrockLangchainClient.bedrock_with_langchain_client()[0m return [1m[31m('Erro interno no servidor', 500)[0m violates type hint [1m[32m<class 'str'>[0m, as [1m[33mtuple [0m[1m[31m('Erro interno no servidor', 500)[0m not instance of [1m[33mstr[0m.
Traceback (most recent call last):
  File "/home/arthurmeirelessm/flask-fargate-app/src/logger.py", line 24, in async_wrapper
    result = await func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<@beartype(src.clients.bedrock_client.BedrockLangchainClient.bedrock_with_langchain_client) at 0x7f34a3d022a0>", line 44, in bedrock_with_langchain_client
beartype.roar.BeartypeCallHintReturnViolation: Coroutine factory method[1m[35m src.clients.bedrock_client.BedrockLangchainClient.bedrock_with_langchain_client()[0m return [1m[31m('Erro interno no servidor', 500)[0m violates type hint [1m[32m<class 'str'>[0m, as [1m[33mtuple [0m[1m[31m('Erro interno no servidor', 500)[0m not instance of [1m[33mstr[0m.
2025-04-17 00:43:20,145 - INFO - [ASYNC] Finalizado: agent_orchestrator_service -> Retorno: ('Erro interno no servidor', 500)
2025-04-17 00:43:20,146 - INFO - [ASYNC] Finalizado: agent_orchestrator_controller -> Retorno: <Response [500 INTERNAL SERVER ERROR]>
2025-04-17 00:43:20,147 - WARNING - Executing <Task finished name='Task-11' coro=<ASGIHTTPConnection.handle_request() done, defined at /home/arthurmeirelessm/flask-fargate-app/venv/lib/python3.12/site-packages/quart/asgi.py:106> result=None created at /usr/lib/python3.12/asyncio/tasks.py:695> took 0.756 seconds
